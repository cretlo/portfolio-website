---
import type { ImageMetadata } from "astro";
import ProjectCard from "./ProjectCard.astro";
import projectsData from "../data/projects.json";

const imgMap = new Map<string, ImageMetadata>();

projectsData.forEach(async (data) => {
    const key = data.params.project as string;
    const imgData = import(data.props.imgPath) as unknown;

    imgMap.set(key, imgData as ImageMetadata);
});
//const { title, imgPath, desc } = data.props;
//title={title}
//imgPath={imgPath}
//desc={desc}
//link={project}
---

<section id="projects" class="mx-12">
    <h2 class="text-center text-4xl font-semibold mb-4">Projects</h2>
    <div class="flex flex-wrap gap-12">
        {
            projectsData.map((data) => {
                const { project } = data.params;

                return (
                    <ProjectCard
                        {...data.props}
                        link={project}
                        imgData={imgMap.get(project)}
                    />
                );
            })
        }
    </div>
</section>
